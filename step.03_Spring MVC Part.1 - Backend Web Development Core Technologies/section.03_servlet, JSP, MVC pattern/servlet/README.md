# 섹션 03. 서블릿, JSP, MVC 패턴
## 04. MVC 패턴 - 개요
- `너무 많은 역할`
  - 하나의 서블릿이나 JSP만으로 비즈니스 로직과 뷰 렌더링까지 모두 처리하게 되면, 너무 많은 역할을 하게 된다.
  - 이는 결과적으로 유지보수의 어려움을 초래한다.
- `변경 라이프 사이클`
  - 비즈니스 로직과 뷰 로직의 사이, 변경 라이프 사이클이 다르다.
  - 수정에 있어서 서로에게 영향을 주는 경우는 드물다.
  - 변경 라이프 사이클이 다른데 하나의 코드로 관리!?, 유지보수의 불편함만 초래한다.
- `기능 특화`
  - 특정 기능에 특화 되어있다면 해당 부분만 담당토록 하자!
    - JSP 같은 뷰 템플릿은 화면 렌더링에 최적화 되어 있다.
- `Model View Controller`
  - MVC 패턴은 단일 서블릿 or JSP로 처리하던 것을 컨트롤러(Controller)와 뷰(View)라는 영역으로 역할을 나눈 것을 말한다.
  - 웹 애플리케이션의 경우 보통 `MVC패턴`을 사용한다.
  - `Controller` : HTTP 요청을 받아 파라미터 검증, 비즈니스 로직 실행한다. `View`에서 사용할 결과 데이터를 조회해 `Model`에 담는다.
  - `Model` : `View`에 출력할 데이터를 담아둔다.
  - `View` : `Model`에 담겨있는 데이터를 통해 화면을 렌더링한다. HTML을 생성하는 걸 말함  
<br/>

#### 참고
- 컨트롤러에 비즈니스 로직을 담을 수도 있지만 이는 컨트롤러의 역할이 너무 많아진다.
- 일반적으로 비즈니스 로직은 서비스(Service) 계층을 별도로 만들어 처리한다.
  - 이 때, 컨트롤러는 필요한 비즈니스 로직이 있는 서비스를 호출하는 역할을 담당한다.
- 비즈니스 로직 변경 시 호출 컨트롤러의 코드도 변경될 수 있다.  
<br/>

- 단일 서블릿, JSP 사용
![img_001.jpg](img/img_001.jpg)

- MVC 패턴 사용1
![img_002.jpg](img/img_002.jpg)

- MVC 패턴 사용
![img_003.jpg](img/img_003.jpg)  
<br/><br/><br/>

## 06. MVC 패턴 - 한계
MVC 패턴 활용 시 컨트롤러와 뷰 렌더링의 역할을 명확하게 구분 가능하다.
  - 뷰의 경우 화면 렌더링 역할에만 충실하면 되므로 코드가 깔끔하고 직관적이다.
  - 하지만 컨트롤러의 경우 불필요한 중복이 많이 보이고 불필요한 코드도 발견할 수 있다.  
<br/>

### MVC 컨트롤러의 단점
- 포워드 중복
  - `View`로 이동하는 코드가 항상 중복 호출되어야 함.
    - 해당 부분을 메서드로 공통화해도 되나, 결국 항상 직접 호출해야 함
```java
RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
dispatcher.forward(request, response);
```  
<br/>

### ViewPath에 중복
```java
String viewPath = "/WEB-INF/views/new-form.jsp";
```
- prefix : `/WEB-INF/views/`
- suffix : `.jsp`
  - `jsp`가 아닌 다른 확장자를 사용할 경우 전체 코드를 수정해야 한다.  
<br/>

### 사용하지 않는 코드
```
HttpServletRequest request, HttpServletResponse response
```
- 해당 코드를 사용할 때도 있고 사용하지 않을 때도 있음
  - 특히 `resposne`의 경우 현재 학슨 중인 코드에 사용되지 않음
  - `HttpServletRequest, HttpServletResponse`를 사용하는 경우 테스트 케이스를 작성하는데 어려움이 따른다.  
<br/>

### 공통 처리가 어려움
- 기능의 복잡도가 올라갈수록 컨트롤러에서 공통으로 처리할 부분이 점점 많아짐
- 결과적으로 해당 메서드를 항상 호출해야하고, 호출되지 않는 경우 문제가 될 것이다.
  - 애초에 호출하는 것도 중복!  
<br/>

### 결국 공통 처리가 어렵다는 것이 문제다!
- 문제 해결을 위해선 호출 전 미리 공통 기능을 처리해야 한다.
- `수문장 역할`을 하는 기능이 필요로 하며, `프론트 컨트롤러(Front Controller) 패턴`을 도입하도록 한다.
  - 프론트 컨트롤러는 스프링 MVC의 핵심이 될것이다.