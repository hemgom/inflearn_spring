# 섹션 05. 데이터 접근 기술 - JPA
## 01. JPA 시작
`Spring`이 `DI 컨테이너`를 포함한 애플리케이션 전반의 다양한 기능을 제공하면 `JPA`는 `ORM 데이터 접근 기술`을 제공
- `JdbcTemplate`이나 `MyBatis`같은 SQL 매퍼 기술은 개발자가 SQL 을 직접 작성
- `JPA`의 경우 SQL 조차도 JPA 가 대신 작성하고 처리해줌
- 실무에서는 `스프링 데이터 JPA`와 `Querydsl`을 함께 사용, 이들은 `JPA`를 편리하게 사용하도록 도와줌
<br/><br/><br/>

## 02. ORM 개념1 - SQL 중심적인 개발의 문제점
### 현재의 개발에서 관계형 DB
지금의 시대는 `객체`를 `관계형 DB`에 관리한다.  
<br/>

### SQL 중심적 개발의 문제점들
- 계속해서 `반복`되고 지루한 코드들
  - ex) CRUD 등
- `SQL에 의존적인 개발`을 피하기가 어려움  
<br/>

### 객체와 관계형 DB의 차이점
- `상속`, `연관관계`, `데이터 타입`, `데이터 식별 방법`
<br/><br/><br/>

## 03. ORM 개념2 - JPA 소개
### JPA (Java Persistence API)
- 자바 진영의 `ORM 기술 표준`
- `애플리케이션`과 `JDBC` 사이에서 동작
  - `Entity 분석`, `INSERT SQL 생성`, `JDBC API 사용`, `패러다임 불일치 해결` 등
- `하이버네이트`라는 오픈소스에서 시작되어 오랜기간 동안 표준으로 자리매김해 정말 왠만한 기능들은 다 구현되어 있다
- 인터페이스의 모음이며 `JPA 2.1 표준 명세`의 구현체는 `하이버네이트`, `EclipseLink`, `DataNucleus`가 있다  
<br/>

### ORM (Object-relational mapping) - 객체 관계 매핑
- 객체는 객체대로, 관계형 DB 는 관계형 DB 대로 설계 -> ORM 프레임워크가 중간에서 매핑
- 대중적인 언어에는 대부분 ORM 기술이 존재  
- `객체`와 `관계형 DB(RDB)`라는 두 기둥 위에 위치한 기술, 그래서 두 가지 모루들 잘 알고 있어야 제대로 사용이 가능함
<br/>

### JPA를 사용해야 하는 이유
- `SQL 중심적` -> `객체 중심적`: 개발을 위해서
- 뛰어난 `생산성과 성능`, 편리한 `유지보수`
- `패러다임의 불일치 해결` 가능
- `데이터 접근 추상화`와 `벤더 독립성`
- 무엇보다 자바 진영의 `표준`이기 때문  
<br/><br/><br/>

## 06. JPA 적용2 - Repository 분석
### JPQL
JPA 가 제공하는 객체지향 쿼리 언어
- 주로 여러 데이터를 복잡한 조건으로 조회시 사용
- `SQL - 테이블 대상`이라면 `JPQL - 엔티티 객체 대상`으로 SQL 을 실행
- SQL 과 문법이 거의 비슷함  
<br/>

#### 파라미터 - JPQL
- `where price <= :maxPrice`: 파라미터 입력
- `query.setParameter("maxPrice", maxPrice)`: 파라미터 바인딩  
<br/>

### 동적 쿼리 문제
`JPA`를 사용해도 동적 쿼리에 취약한데, 이 부분은 `Querydsl` 기술을 활용하면 깔끔하게 해결이 가능
- 보통 실무에서 `JPA` 사용시 자연스럽게 `Querydsl`이 따라 붙게 됨