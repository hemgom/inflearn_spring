# 섹션 08. 데이터 접근 기술 - 활용 방안
## 01. 스프링 데이터 JPA 예제와 트레이드 오프
### 클래스 의존 관계
![1](img/img_001.jpg)
### 런타임 객체 의존 관계
![2](img/img_002.jpg)
- 중간에 `JpaItemRepositoryV2`가 어댑터 역할을 함
  - `ItemService`에서 사용하는 `ItemRepository` 인터페이스를 그대로 유지할 수 있음
  - `ItemService` 코드를 변경하지 않아도 됨  
<br/>

#### 문제점 or 불편사항
- 구조를 맞추려고 중간에 `어댑터`가 들어가게 됨
  - 구조가 복잡해졌고 사용 클래스가 많아짐
- 개발자 입장에서 실제 코드 뿐만 아니라 중간 어뎁터까지 개발해야 하는 상황이 됨
- 물론 유지보수 관점에서는 인터페이스 변경 없이 구현체를 변경할 수 있다는 장점이 있음
  - `DI, OCP 원칙`을 지킬 수 있음
  - 분명 편해지긴 했지만 유지보수해야 할 코드가 `실제 코드`는 물론 `어댑터 코드`까지 늘어남  
<br/>

### 다른 방향 - Spring JPA 직접 사용
- `ItemService` 를 유지하는 걸 고집할게 아니라 일부를 고쳐서 `직접 스프링 JPA`를 사용하는 방향이 있음
  - 단점 : `DI, OCP 원칙`을 포기하게 됨
  - 장점 : 복잡한 어댑터 제거 가능 -> 구조를 단순하게 가져갈 수 있음  
<br/>

#### 클래스 의존 관계
![3](img/img_003.jpg)
- `ItemService`에서 스프링 데이터 JPA 로 만든 리포지토리를 직접 참조
  - 단, `ItemService` 코드 일부를 변경해야 함  
<br/>

#### 런타임 객체 의존 관계
![4](img/img_004.jpg)  
<br/>

### 트레이드 오프
여기서 말하는 `트레이드 오프`란, `구조의 안전성`이냐 `단순한 구조와 개발의 편리성` 사이의 선택
- `구조의 안전성`: DI, OCP 를 지키기 위해 어댑터를 추가해 더 많은 코드를 유지함
- `단순한 구조 & 개발의 편리성`: 어댑터를 제거하며 DI, OCP 를 포기해 구조를 단순하게 가져가며 `ItemService` 코드를 직접 변경
- 어느 것이 정답일 수는 없다. 특정 상황에 따라 중요도가 달라지기 때문이다.
- 개발 필요한 자원은 무한하지 않다. `추상화도 비용이 들기` 때문에 어설픈 추상화는 독이 된다.
  - 여기서 말하는 `비용`은 `유지보수 관점에서의 비용`을 뜻 함