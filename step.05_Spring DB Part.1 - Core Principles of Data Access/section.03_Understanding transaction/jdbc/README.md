# 섹션 03. 트랜잭션 이해
## 01. 트랜잭션 - 개념 이해
### 데이터베이스에 데이터를 저장하는 이유?
데이터 베이스가 `트랜잭션`이라는 개념을 지원하기 때문!  
- `트랜잭션`: 직역하면 `거래`라는 뜻이며, 여기서는 하나의 `거래를 안전하게 처리`하도록 보장해주는 것을 뜻함
  - `안전한 거래 처리`: 예를 들어 `A`가 `B`에게 `5,000원`을 계좌이체 할 때 [`A`: `-5,000`, `B`: `+5,000`]
  - 잔고의 감소와 증가가 합쳐저 하나의 작업처럼 동작해야 함
  - 두 작업(감소, 증가)이 `모두 성공`하면 저장, `둘 중 한 작업이라도 실패`한다면 이전 상태로 돌아가야 함
    - `커밋(Commit)`: 모든 작업이 성공해 DB에 정상 반영
    - `롤백(Rollback)`: 둘 중 하나라도 작업이 실패해 이전으로 되돌리는 것  
<br/>

### 트랜잭션 ACID
트랜잭션은 `ACID`라고 하는 `원자성(Atomicity)`, `일관성(Consistency)`, `격리성(Isolation)`, `지속성(Durability)`을 보장해야 함
- `원자성`: 트랜잭션 내, 실행 작업들은 `하나의 작업`처럼 모두 성공하거나 모두 실패해야 함
- `일관성`: 모든 트랜잭션은 `일관성 있는 DB 상태`를 유지해야 함
  - ex) DB에서 정한 `무결성 제약 조건`을 항상 만족해야 함
- `격리성`: 동시에 실행되는 트랜잭션들이 `서로 영향을 미치지 않게` 격리함
  - ex) 동시에 같은 데이터를 수정하지 못하도록 해야함
  - 동시성과 관련된 성능 이슈로 인하여 `트랜잭션 격리 수준(Isolation level)`을 선택 가능함
- `지속성`: 트랜잭션 성공시 항상 결과를 기록하여야 함
  - 작업 중간에 시스템 문제가 발생해도 DB 로그 등을 사용해 성공한 트랜잭션 내용을 복구해야 함  
<br/>

### 문제는 격리성
트랜잭션은 원자성, 일관성, 지속성을 보장한다. 문제는 격리성이며 이를 완벽하게 보장하려면 트랜잭션은 거의 순서대로 실행해야 한다.
- 하지만 완벽히 보장할 경우 `동시 처리 성능`이 매우 떨어진다.
- 그렇기에 `ANSI 표준`에서는 트랜잭션의 격리 수준을 4단계에 나누어 정의함
  1. READ UNCOMMITTED (커밋되지 않은 읽기)
  2. READ COMMITTED (커밋된 읽기) -> `일반적으로 많이 사용`
  3. REPEATABLE READ (반복 가능한 읽기)
  4. SERIALIZABLE (직렬화 가능)